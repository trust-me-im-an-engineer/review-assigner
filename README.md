## Допущения

**openapi.yaml считается не изменяемым контрактом**.

При конфликтах со словесным описанием Backend-trainee-assignment-autumn-2025.md приоритет отдан в сторону openapi спецификации.

### AdminToken и UserToken

#### Проблема

Токены указаны в `openapi components/paths/.../security`, но не описаны в `components/securitySchemes` (компонент `securitySchemas` отсутствует).

#### Допущение

Существует единственный **AdminToken**, который берётся из переменной окружения **`ADMIN_TOKEN`**. Принимается в заголовке `X-Admin-Token`. Для **UserToken** сделано упрощение: для выполнения запроса достаточно, чтобы заголовок `X-User-Token` просто присутствовал в запросе.
### Создание и обновление пользователей через `/team/add`

#### Проблема

Согласно описанию, эндпоинт `/team/add` используется для создания команды и, "**создаёт/обновляет пользователей**". Таким образом один эндпоинт выполняет 3 функции одновременно, что не является удобным.

#### Допущение

Так как openapi считается неизменяемым контрактом, оставлены все 3 функции.

При вызове `/team/add`:
* Если `team_name` существует, возвращается ошибка.
* Если `team_name` не существует, создается команда и создаются и/или меняются пользователи: для каждого члена в списке `members` либо создается новый пользователь, либо обновляется существующий.

Так же это значит что команда пользователя может измениться. От сюда допущение, что "переназначить конкретного ревьювера на другого из его команды" переназначает на другого ревьюера из команды текущего на момент назначения. Например, если user1 был назначен на pr1 будучи в team1, а затем перешел в team2, то при переназначении pr1 будет назначен новый ревьюер из team1, а не из текущей team2.  

### Флаг `needMoreReviewers`

#### Проблема

В словесном описании сущности Pull Request упоминается флаг `needMoreReviewers`, но он **отсутствует** в схеме `#/components/schemas/PullRequest` в `openapi.yaml`.

#### Допущение

Флаг **`needMoreReviewers`** будет исключительно внутренним и не будет отдаваться сервисом, поскольку он не определен в предоставленной OpenAPI-схеме.

### ErrorResponse code

#### Проблема

ErrorResponse определяет возвращаемую структуру ошибок, но содержит не достаточно полей в code enum:
* отсутствует код для невалидного запроса (например `BAD_REQUEST`)
* отсутствует код для внутренних ошибок сервера (например `INTERNAL_ERROR`)

#### Допущение

Так как openapi схема считается неизменяемой, для невалидных запросов и внутренних ошибок сервера использован код ошибки `NOT_FOUND`, хоть это и семантически некорректно.